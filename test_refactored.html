<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAI - 메이플스토리 정보탐색 CHAT BOT</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body class="home-page">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="test_refactored.html" class="logo">
                <div class="logo-icon">MAI</div>
                Maple Story Chatbot
            </a>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navigation">
        <div class="nav-content">
            <a href="test_refactored.html" class="nav-item active">홈</a>
            <a href="page2_refactored.html" class="nav-item">CHAT BOT</a>
            <a href="#" class="nav-item">캐릭터 검색</a>
            <a href="#" class="nav-item">큐브</a>
            <a href="#" class="nav-item">스타포스</a>
            <a href="#" class="nav-item">(API 연동)</a>
            <div class="user-info">내정보 | 로그아웃</div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <!-- Login Status Card -->
            <div class="login-status-card" id="loginStatusCard">
                    <!-- Login Form (shown when not logged in) -->
                    <div class="login-form" id="loginForm">
                        <input type="text" class="login-input" id="usernameInput" placeholder="아이디">
                        <input type="password" class="login-input" id="passwordInput" placeholder="비밀번호">
                        <button class="login-btn" onclick="performLogin()">로그인</button>
                    </div>
                    
                    <!-- User Profile (shown when logged in) -->
                    <div class="character-profile-display hidden" id="userProfile">
                        <div class="character-avatar-small">👤</div>
                        <div class="character-info-small">
                            <div class="character-name-small" id="loggedInUser">사용자</div>
                            <div class="character-details-small">로그인됨</div>
                        </div>
                    </div>
                    <button class="logout-btn hidden" id="logoutBtn" onclick="performLogout()">로그아웃</button>
            </div>

            <!-- Character Search Card -->
            <div class="character-search-card">
                    <div class="search-input-group">
                        <input type="text" class="character-search-input" id="characterSearchInput" placeholder="캐릭터 닉네임 입력">
                        <button class="character-search-btn" onclick="searchCharacter()">
                            <span>검색</span>
                        </button>
                    </div>
                    
                    <div class="search-recent" id="recentSearches">
                        <div class="search-recent-title">최근 검색</div>
                        <div class="search-recent-list" id="recentSearchList">
                            <span class="search-recent-item" onclick="searchCharacter('오지환')">오지환</span>
                            <span class="search-recent-item" onclick="searchCharacter('메이플유저')">메이플유저</span>
                            <span class="search-recent-item" onclick="searchCharacter('초보자123')">초보자123</span>
                        </div>
                    </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <h1 class="main-title">메이플 스토리</h1>
            <h2 class="main-subtitle">정보탐색 CHAT BOT</h2>
            <p class="main-description">
                메이플스토리의 모든 정보를 AI와 함께 탐색하세요.<br>
                스킬, 아이템, 사냥터, 보스 공략까지 궁금한 모든 것을 물어보세요!
            </p>
            
            <!-- Main Search Box -->
            <div class="main-search-container">
                <div class="main-search-box">
                    <input type="text" class="main-search-input" id="mainSearchInput" placeholder="메이플스토리에 관해 무엇이든 물어보세요...">
                    <button class="main-search-btn" onclick="performMainSearch()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Search Hint Section -->
            <div class="search-hint">
                <div class="search-hint-title">💡 위 검색창에서 바로 질문해보세요!</div>
                <div class="search-hint-text">질문하면 ChatBot 페이지로 이동하면서 자동으로 질문이 전송됩니다</div>
                <div class="search-examples">
                    <span class="search-example" onclick="searchExample('메르세데스 스킬 알려줘')">메르세데스 스킬 알려줘</span>
                    <span class="search-example" onclick="searchExample('180렙 사냥터 추천')">180렙 사냥터 추천</span>
                    <span class="search-example" onclick="searchExample('뇌전 드랍 장소')">뇌전 드랍 장소</span>
                    <span class="search-example" onclick="searchExample('보스 공략법')">보스 공략법</span>
                </div>
            </div>

            <div class="cta-section">
                <div class="cta-buttons">
                    <a href="page2_refactored.html" class="cta-button primary">
                        💬 ChatBot 시작하기
                    </a>
                    <a href="#features" class="cta-button secondary">
                        ✨ 기능 둘러보기
                    </a>
                </div>
            </div>

            <!-- Features Preview -->
            <div class="features-preview" id="features">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h3 class="feature-title">스킬 가이드</h3>
                    <p class="feature-description">
                        모든 직업의 스킬트리와 연계 정보를 상세히 안내합니다.
                    </p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🗺️</div>
                    <h3 class="feature-title">사냥터 추천</h3>
                    <p class="feature-description">
                        레벨과 직업에 맞는 최적의 사냥터를 추천해드립니다.
                    </p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">⚔️</div>
                    <h3 class="feature-title">보스 공략</h3>
                    <p class="feature-description">
                        보스별 패턴과 공략법을 자세히 설명해드립니다.
                    </p>
                </div>
            </div>

            <!-- Mascot Section -->
            <div class="mascot-section">
                <div class="speech-bubble">
                    <div class="bubble-text">아무거나 물어봐욤!</div>
                </div>
                <div class="mascot">🧚‍♀️</div>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <div class="event-carousel">
                <div class="event-content">
                    <div class="event-title">🎮 윈터 이벤트</div>
                    <div class="event-subtitle">12월 31일까지 진행중!</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Floating Send Button -->
    <div class="floating-send-btn" onclick="location.href='page2_refactored.html'">💬</div>

    <script src="js/common.js"></script>
    <script>
        // Search example function
        function searchExample(query) {
            const searchInput = document.querySelector('.search-input');
            if (searchInput) {
                searchInput.value = query;
                // Trigger search
                window.MapleStoryChatBot.performSearch(query);
            }
        }

        // Home page specific JavaScript
        function changeMascotMessage() {
            const bubbleText = document.querySelector('.bubble-text');
            if (bubbleText) {
                const messages = [
                    '아무거나 물어봐욤!',
                    '메이플스토리가 궁금해?',
                    '스킬이나 사냥터 알려줄게!',
                    '뭐든 물어보세요~ ✨',
                    '보스 공략법도 알려드려요!',
                    '캐릭터 육성 팁이 궁금하시나요?'
                ];
                
                const currentText = bubbleText.textContent.trim();
                let currentIndex = messages.indexOf(currentText);
                let nextIndex = currentIndex !== -1 ? (currentIndex + 1) % messages.length : Math.floor(Math.random() * messages.length);
                
                bubbleText.textContent = messages[nextIndex];
                
                const mascotElement = document.querySelector('.mascot');
                if (mascotElement) {
                    mascotElement.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        mascotElement.style.transform = 'scale(1)';
                    }, 150);
                }
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setActiveNavItem('홈');
            
            const mascot = document.querySelector('.mascot');
            if (mascot) {
                mascot.addEventListener('click', function(e) {
                    e.stopPropagation();
                    changeMascotMessage();
                });
            }

            setInterval(changeMascotMessage, 10000);
        });
    </script>
</body>
</html>